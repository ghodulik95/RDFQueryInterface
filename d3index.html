<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script type="text/javascript" src="d3/d3.v3.js"></script>
		<link rel="stylesheet" type="text/css" href="styles.css">
		
    </head>
    <body>
        <script type="text/javascript">
			var drag = d3.behavior.drag()
				.on("drag", dragmove)
				.on("dragend", drawLine);
				
			var dataset = [ 5, 10, 15, 20, 25 ];
			var w = 500;
			var h = 500;
            var svg = d3.select("body")
            .append("svg")
            .attr("width", w)   
            .attr("height", h);
			
			
			var circles = svg.selectAll("circle")
			.data(dataset)
			.enter()
			.append("circle")
			.style("cursor", "pointer")
			.attr("id2", function(d){return d;})
			.call(drag);
			
			circles.attr("cx", function(d, i) {
						return 0;
					})
				   .attr("cy", 0)
				   .attr("r", function(d) {
						return d;
				   });
				   
			function drawLine(d, i){
				svg.selectAll("path").remove();
				circles[0][0].info = 1;
				alert(circles[0][0].info);
				coordi = getElementCoords(circles[0][0], {x:0, y:0});
				coordj = getElementCoords(circles[0][i], {x:0, y:0});
				lineData = [coordi, coordj];
				var lineFunction = d3.svg.line()
							.x(function(d) { return d.x; })
							.y(function(d) { return d.y; })
							.interpolate("linear");
				svg.append("path").attr("d", lineFunction(lineData))
								.attr("stroke", "blue")
								.attr("stroke-width", 2)
								.attr("fill", "none");;
			}
					
			function dragmove(d) {
			  var x = d3.event.x;
			  var y = d3.event.y;
			  d3.select(this).attr("transform", "translate(" + x + "," + y + ")");
			  return [3,4];
			}
			
			function getElementCoords(element, coords) {
				var ctm = element.getCTM(),
				xn = ctm.e + coords.x*ctm.a,
				yn = ctm.f + coords.y*ctm.d;
				return { x: xn, y: yn };
			};
		
			
				   
			
					
			
        </script>
    </body>
</html> 